<div class="jumbotron">
	<h1 class="text-center">Welcome to Linkr!</h1>
  	<h3 class="text-center">Create, follow or suggest libraries</h3>
</div>

<div class="library-header">
	<h2 class="libraries-text">Libraries</h2>
	<%= link_to "New", new_library_path, class: "btn btn-success new-btn" %>
	<%= link_to "Browse", '', class: "btn btn-default browse-btn" %>
</div>

<% if @libraries_own.empty? and @libraries_followed.empty? and @suggestions.empty? %>
<div class="empty">
	<p class="empty-text">You don't have any libraries.</p>
	<p class="empty-suggestion"><%= link_to "Create", new_library_path, class: "empty-link" %> or <%= link_to "Browse", '', class: "empty-link" %> libraries!</p>
</div>
<% else %>
<ul class="nav nav-tabs library-tabs" role="tablist">
	<% unless @libraries_own.empty? %>
		<li role="presentation" class="active" >
			<a href="#created" aria-controls="created" role="tab" data-toggle="tab">Created<i class="glyphicon glyphicon-pencil"></i></a>
		</li>
	<% end %>
	<% unless @libraries_followed.empty? %>
		<li role="presentation" <% if @libraries_own.empty? %> class="active"<% end %> >
			<a href="#followed" aria-controls="followed" role="tab" data-toggle="tab">Followed<i class="glyphicon glyphicon-sunglasses"></i></a>
		</li>
	<% end %>
	<% unless @suggestions.empty? %>
		<li role="presentation" <% if @libraries_own.empty? and @suggestions.empty? %> class="active"<% end %> >
			<a href="#suggested" aria-controls="suggested" role="tab" data-toggle="tab">Suggested<i class="glyphicon glyphicon-link"></i></a>
		</li>
	<% end %>
</ul>
<div class="tab-content library-tab-content">
	<!-- Created tab -->
	<div role="tabpanel" class="tab-pane fade <% unless @libraries_own.empty? %>in active <%end %>" id="created">
		<% @libraries_own.each do |lib| %>
		<div class="panel panel-default">
			<div class="panel-heading">
				<div class="panel-title">
					<span class="library-title"><%= link_to lib.topic, library_path(lib), class: "library-title" %></span>
					<%= link_to library_path(lib), data: {confirm: "Are you sure?"}, :method => :delete, class: "pull-right" do %>
			      		<span class="glyphicon icon-small glyphicon-remove" data-toggle="tooltip" data-placement="top" title="Delete" aria-hidden="true"></span>
			        <% end %>
					<%= link_to edit_library_path(lib), class: "pull-right" do %>
			        	<span class="glyphicon icon-small glyphicon-edit" data-toggle="tooltip" data-placement="top" title="Edit" aria-hidden="true"></span>
			        <% end %>
					<%= link_to new_suggestion_path(:lib => lib), class: "pull-right"  do %>
			        	<span class="glyphicon icon-small glyphicon-share-alt" data-toggle="tooltip" data-placement="top" title="Share" aria-hidden="true"></span>
			        <% end %>
				</div>
			</div>
			<div class="panel-body">
				<%= lib.description %>
				<%= link_to library_path(lib), class: "pull-right" do %>
				    <button type="button" class="btn btn-primary open-btn">Open</button>
				<% end %>
			</div>
		</div>
		<% end %>
	</div>
	<!-- Followed tab -->
	<div role="tabpanel" class="tab-pane fade <% if @libraries_own.empty? %>in active<%end%>" id="followed">
		<% @libraries_followed.each do |lib| %>
		<div class="panel panel-default">
			<div class="panel-heading">
				<div class="panel-title">
					<span class="library-title"><%= link_to lib.topic, library_path(lib), class: "library-title" %></span>
					<%= link_to library_path(lib), data: {confirm: "Are you sure?"}, :method => :delete, class: "pull-right" do %>
		      			<span class="glyphicon icon-small glyphicon-remove" data-toggle="tooltip" data-placement="top" title="Unfollow" aria-hidden="true"></span>
			        <% end %>
					<%= link_to edit_library_path(lib), class: "pull-right" do %>
			        	<span class="glyphicon icon-small glyphicon-edit" data-toggle="tooltip" data-placement="top" title="Edit" aria-hidden="true"></span>
			        <% end %>
					<%= link_to new_suggestion_path(:lib => lib), class: "pull-right" do %>
			        	<span class="glyphicon icon-small glyphicon-share-alt" data-toggle="tooltip" data-placement="top" title="Share" aria-hidden="true"></span>
			        <% end %>
				</div>
			</div>
			<div class="panel-body">
				<%= lib.description %>
				<%= link_to "Open", library_path(lib), class: "btn btn-primary pull-right open-btn" %>
			</div>
		</div>
		<% end %>
	</div>
	<!-- Suggested tab -->
	<div role="tabpanel" class="tab-pane fade <% if @libraries_own.empty? and @libraries_followed.empty? %>in active <%end%>" id="suggested">
		<% @suggestions.each do |sug| %>
		<div class="panel panel-default">
			<div class="panel-heading">
				<div class="panel-title">
					<span class="library-title"><%= link_to sug.library.topic, library_path(sug.library), class: "library-title" %></span><span class="suggested-by">suggested by: <span><%= sug.creator.email %></span></span>
					<%= link_to "Reject", suggestion_path(sug), data: {confirm: "Are you sure?"}, :method => :delete, class: 'btn btn-danger pull-right reject-btn' %>
					<%= link_to "Follow", accept_suggestion_path(sug), class: 'btn btn-success pull-right follow-btn'  %>
				</div>
			</div>
			<div class="panel-body">
				<%= sug.library.description %>
				<%= link_to "Open", library_path(sug.library), class: "btn btn-primary pull-right open-btn" %>
			</div>
		</div>
		<% end %>
	</div>
</div>
<% end %>
